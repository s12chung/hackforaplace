(function() {
    function show_message_modal(title, body) {
        var $message_modal = $('#message_modal');
        $message_modal.find('.modal-title').html(title);
        $message_modal.find('.modal-body').html(body);
        $message_modal.modal('show');
    }

    $('#modal').modal('hide');
    var $sign_up_email = $('.form-group');
    $sign_up_email.removeClass('has-error');
    Behavior.button.reset_all();

    <% if @sign_up.valid? %>
    show_message_modal('Thanks for signing up!',
            '<%= j render("modal_confirmation")%>');
    $('#sign_up_email').val('');
    <% else %>
    show_message_modal('Error',
            '<%= @sign_up.errors.full_messages.first %>');
    $sign_up_email.addClass('has-error');
    <% end %>
})();